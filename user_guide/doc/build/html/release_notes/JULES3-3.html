
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>1.30. JULES version 3.3 Release Notes &#8212; Joint UK Land Environment Simulator (JULES) v7.3 User Guide</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/nature.css" />
    <link rel="stylesheet" href="../_static/jules-tweaks.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1.31. JULES version 3.2 Release Notes" href="JULES3-2.html" />
    <link rel="prev" title="1.29. JULES version 3.4 Release Notes" href="JULES3-4.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../nml-modindex.html" title="Fortran Namelist Index"
             >namelists</a> |</li>
        <li class="right" >
          <a href="JULES3-2.html" title="1.31. JULES version 3.2 Release Notes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="JULES3-4.html" title="1.29. JULES version 3.4 Release Notes"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Joint UK Land Environment Simulator (JULES) v7.3 User Guide</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="contents.html" accesskey="U"><span class="section-number">1. </span>Release notes</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">1.30. </span>JULES version 3.3 Release Notes</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="jules-version-3-3-release-notes">
<h1><span class="section-number">1.30. </span>JULES version 3.3 Release Notes<a class="headerlink" href="#jules-version-3-3-release-notes" title="Permalink to this heading">¶</a></h1>
<section id="ability-to-run-jules-in-parallel">
<h2><span class="section-number">1.30.1. </span>Ability to run JULES in parallel<a class="headerlink" href="#ability-to-run-jules-in-parallel" title="Permalink to this heading">¶</a></h2>
<p>JULES can now run multiple points in parallel, using multiple cores on the same machine or a cluster of machines. This is accomplished using <a class="reference external" href="http://en.wikipedia.org/wiki/Message_Passing_Interface">MPI (Message Passing Interface)</a>, a standardised message passing interface. Several implementations of MPI are available, the most commonly used being <a class="reference external" href="http://www.mpich.org/">MPICH2</a> and <a class="reference external" href="http://www.open-mpi.org/">OpenMPI</a>.</p>
<p>JULES takes advantage of the parallel I/O features in <a class="reference external" href="http://www.hdfgroup.org/HDF5/">HDF5</a> / <a class="reference external" href="http://www.unidata.ucar.edu/software/netcdf/">NetCDF4</a>. These are not enabled by default, and so must be explicitly enabled when HDF5 / NetCDF4 are compiled. More information on how to do this can be found on the <a class="reference external" href="http://www.unidata.ucar.edu/software/netcdf/docs/getting_and_building_netcdf.html#build_parallel">NetCDF website</a>.</p>
<p>Information on how to build and run JULES in parallel can be found in the JULES User Guide. <em>Note that although this development has proven stable during testing, it is still experimental and is considered to be for advanced users only.</em></p>
</section>
<section id="changes-to-documentation">
<h2><span class="section-number">1.30.2. </span>Changes to documentation<a class="headerlink" href="#changes-to-documentation" title="Permalink to this heading">¶</a></h2>
<p>From a users point of view, the most important change is that the JULES documentation and coding standards are now provided in two forms - HTML (this is the preferred format) and PDF. The HTML documentation is also available on the web at <a class="reference external" href="http://jules-lsm.github.io/">http://jules-lsm.github.io/</a>.</p>
<p>This has been made possible by migrating the documentation from a single massive Word document to the <a class="reference external" href="http://sphinx-doc.org/">Sphinx</a> documentation generator (with some custom extensions to better support Fortran namelists). Although originally intended to document Python projects, Sphinx’s extensibility has seen it adopted for a wide range of projects. Using Sphinx has several advantages over the previous monolithic Word document:</p>
<ul class="simple">
<li><p>Both forms of documentation (HTML and PDF) can be built from the same sources.</p></li>
<li><p>The documentation is now split into several smaller files that are combined by Sphinx at build-time, leading to increased readability.</p></li>
<li><p><a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a>, the markup language used by Sphinx, is a plain text format, meaning that it can be version controlled much more effectively than a Word document (which is treated by Subversion as a single binary entity).</p></li>
<li><p>The only software required to update the documentation is your favourite text editor (rather than Word).</p></li>
</ul>
<p>The <a class="reference external" href="https://puma.nerc.ac.uk/trac/JULES">JULES repository on PUMA</a> has also been refactored so that configurations, documentation and examples sit in a separate project to the core Fortran code.</p>
</section>
<section id="other-changes">
<h2><span class="section-number">1.30.3. </span>Other changes<a class="headerlink" href="#other-changes" title="Permalink to this heading">¶</a></h2>
<dl class="simple">
<dt>Disambiguation of sea ice roughness lengths for heat and momentum</dt><dd><p>Prior to vn3.3, these were implicitly assumed to be equal by the code. They can now be set separately in the namelist <code class="docutils literal notranslate"><span class="pre">JULES_SURF_PARAM</span></code>.</p>
</dd>
<dt>Improvements to the numerics in the soil hydrology</dt><dd><p>Previously, the soil hydrology scheme coped poorly with significant gradients in soil moisture because of the sensitive dependence of the hydraulic conductivity and soil water suction on the soil moisture. See the new switch <code class="docutils literal notranslate"><span class="pre">l_dpsids_dsdz</span></code>.</p>
</dd>
<dt>Implicit numerics for land ice</dt><dd><p>Previously, the updating of land ice temperatures was always explicit, limiting the thickness of soil levels that can be used with standard time steps. There is now an option for implicit numerics for land ice - see the new switch <code class="docutils literal notranslate"><span class="pre">l_land_ice_imp</span></code>.</p>
</dd>
<dt>Scaling of land surface albedo to agree with a given input</dt><dd><p>An option has been added to prescribe the grid-box mean snow-free albedo to a given input (e.g. observations, climatology). See the new switch <code class="docutils literal notranslate"><span class="pre">l_albedo_obs</span></code>. For SW albedos, the albedos of the individual tiles are scaled linearly so that the grid-box mean albedo matches the observations, within limits for each tile. When VIS and NIR albedos are required then the input parameters are scaled and corrected in a similar manner. The change was included in the Global Land configuration at vn5.0: <a class="reference external" href="https://code.metoffice.gov.uk/trac/GL/ticket/8">https://code.metoffice.gov.uk/trac/GL/ticket/8</a>.</p>
</dd>
<dt>BVOC emissions now on a switch</dt><dd><p>Previously, BVOC emissions diagnostics were calculated all the time, regardless of whether they were output. A new switch - <code class="docutils literal notranslate"><span class="pre">l_bvoc_emis</span></code> - has been added to enable the calculation of these diagnostics only when required.</p>
</dd>
<dt>Improvements to logging</dt><dd><p>A new namelist file - <code class="docutils literal notranslate"><span class="pre">logging.nml</span></code> - has been added to give more control over log output from JULES. Previously all output was directed to <code class="docutils literal notranslate"><span class="pre">stdout</span></code>.</p>
</dd>
<dt>Specify namelist directory as an argument</dt><dd><p>It is now possible to specify the directory containing the namelist files as a command line argument to JULES. If no argument is given, JULES looks for the namelist files in the current working directory. Previously, JULES had to be executed in the directory containing the namelists - this change should make it easier to run JULES in batch mode.</p>
</dd>
</dl>
</section>
<section id="bugs-fixed">
<h2><span class="section-number">1.30.4. </span>Bugs fixed<a class="headerlink" href="#bugs-fixed" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Initialisation of <code class="docutils literal notranslate"><span class="pre">chr1p5m</span></code> and <code class="docutils literal notranslate"><span class="pre">resfs</span></code> in <code class="docutils literal notranslate"><span class="pre">sf_exch</span></code>.</p></li>
<li><p>Fix for potential divide-by-zero in <code class="docutils literal notranslate"><span class="pre">sf_stom</span></code> when running with <code class="docutils literal notranslate"><span class="pre">can_rad_mod</span> <span class="pre">=</span> <span class="pre">1</span></code>.</p></li>
<li><p>Various UM-related fixes not relevant to standalone JULES (ENDGAME, aerosol deposition scheme, etc.).</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/jules_logo_html.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">1.30. JULES version 3.3 Release Notes</a><ul>
<li><a class="reference internal" href="#ability-to-run-jules-in-parallel">1.30.1. Ability to run JULES in parallel</a></li>
<li><a class="reference internal" href="#changes-to-documentation">1.30.2. Changes to documentation</a></li>
<li><a class="reference internal" href="#other-changes">1.30.3. Other changes</a></li>
<li><a class="reference internal" href="#bugs-fixed">1.30.4. Bugs fixed</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="JULES3-4.html"
                          title="previous chapter"><span class="section-number">1.29. </span>JULES version 3.4 Release Notes</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="JULES3-2.html"
                          title="next chapter"><span class="section-number">1.31. </span>JULES version 3.2 Release Notes</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../nml-modindex.html" title="Fortran Namelist Index"
             >namelists</a> |</li>
        <li class="right" >
          <a href="JULES3-2.html" title="1.31. JULES version 3.2 Release Notes"
             >next</a> |</li>
        <li class="right" >
          <a href="JULES3-4.html" title="1.29. JULES version 3.4 Release Notes"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Joint UK Land Environment Simulator (JULES) v7.3 User Guide</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="contents.html" ><span class="section-number">1. </span>Release notes</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">1.30. </span>JULES version 3.3 Release Notes</a></li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Crown Copyright 2019.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 5.0.2.
    </div>

  </body>
</html>